#include <iostream>
#include <fstream>
#include <cmath>
#include <iomanip>

// the studied function
long double func(long double x) {
    return (exp(-x) + 1);
}

// calculate exact result via Newton-Leibniz formula
long double Newton_Leibniz(long double a, long double b) {
    return ( (-exp(-b) + b) - (-exp(-a) + a) );
}

// calculate result via midpoint rectangles method
long double rectangles_method(uint16_t n, long double a, long double b) {
    long double result = 0;
    long double delta = (b-a)/n;

    for (int i = 0; i < n; i++) {
        result += func(a + delta/2)*delta;
        a += delta;
    }

    return result;
}

int main() {
    using namespace std;
    setlocale(LC_CTYPE, "UA");

    // arguments of the function, the range of calculation
    long double a, b;
    ifstream fin("input.in");
    if (!fin) cerr << "Файл порожній або не існує";
    fin >> a >> b;
    // variables to save calculated function values
    long double rm;
    long double nl = Newton_Leibniz(a, b);

    //define the output file
    ofstream fout("outKaunin.txt");

    //make cout/fout always print 8 digits after point
    cout.setf(ios::fixed);
    cout.precision(8);
    fout.setf(ios::fixed);
    fout.precision(8);


    cout << "Підінтегральна функція y = e^-x + 1\nПроміжок ["<<a<<", "<<b<< "]\n"
         << "Точне значення інтегралу на проміжку: " << nl << '\n';
    fout << "Підінтегральна функція y = e^-x + 1\nПроміжок ["<<a<<", "<<b<< "]\n"
         << "Точне значення інтегралу на проміжку: " << nl << '\n';

    for (uint16_t n = 10; n <= 100; n += 5) {
        rm = rectangles_method(n, a, b);

        cout << "n = " << n << '\t' << rm << "  "
             << Newton_Leibniz(a, b) - rm << '\n';
        fout << "n = " << n << '\t' << rm << "  "
             << Newton_Leibniz(a, b) - rm << '\n';
    }

    fin.close(); fout.close();
}
#include <iostream>
#include <fstream>
#include <string>
#include <iomanip>

int main() {
    using namespace std;
    setlocale(LC_CTYPE, "UA");
    
    long double integral_value = 0;
    int64_t lines = -1;

    //get the amount of lines in the file
    ifstream input("input.in");
    if (!input) cerr << "Файлу не існує!";
    string s;
    while (!input.eof()) {
        getline(input, s);
        lines++;
    }
    input.clear();
    input.seekg(0, ios::beg);
    
    //array, which shall store all point values from the file
    long double points[lines][2];
    for (int l = 0; l < lines; l++) {
        input >> points[l][0] >> points[l][1];
    }


    //calculation of the integral
    long double x, y;
    for (int i = 0; i < lines-1; i++) {
        x = points[i+1][0] - points[i][0];
        y = (points[i][1] + points[i+1][1])/2;
        integral_value += x*y;
    }
   
    //create the output file
    ofstream output("outKaunin.txt");
    //make cout/output always print 8 digits after the point
    cout.setf(ios::fixed);
    cout.precision(8);
    output.setf(ios::fixed);
    output.precision(8);

    cout << "Інтервал інтегрування: ["  << points[0][0]  << "; " << points[lines-1][0] << "]\n";
    cout << "Значення інтегралу: " << integral_value;
    output << "Інтервал інтегрування: ["  << points[0][0]  << "; " << points[lines-1][0] << "]\n";
    output << "Значення інтегралу: " << integral_value;

    input.close(); output.close();
}
